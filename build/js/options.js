"use strict";function cE(e){return document.createElement(e)}function cT(e){return document.createTextNode(e)}function createRule(e,n){var t,a,c=e.length,i=cE("ul");for(i.className="rules",i.dataset.domain=n;c--;)(t=cE("li")).appendChild(cT(JSON.stringify(e[c]).slice(1,-1))),(a=cE("i")).appendChild(cT("X")),t.appendChild(a),t.dataset.k=JSON.stringify(e[c]),i.appendChild(t);return i}var cdf=document.createDocumentFragment(),content=document.getElementsByClassName("content")[0],mainRules=null;chrome.storage.sync.get({black:{}},function(e){var n=e.black,t=Object.keys(e.black||{}),a=t.length;for(0===a&&cdf.appendChild(cT("暂无"));a--;){var c=t[a],i=cE("li"),l=cE("span"),d=cE("label");d.appendChild(cT("域名:")),l.appendChild(d),l.appendChild(cT(c)),i.appendChild(l),i.appendChild(createRule(n[c],c)),cdf.appendChild(i)}content.appendChild(cdf),mainRules=e});var iSClick=!1;content.addEventListener("click",function(e){var n=e.target;if("X"===n.innerText){if(iSClick)return;iSClick=!0;var t=document.getElementsByClassName("showMsg")[0];t.innerHTML="正在删除中...";for(var a=n.parentNode,c=a.parentNode,i=c.dataset.domain,l=a.dataset.k,d=(l=JSON.parse(l)).id?"id":"class",r=l[d],s=mainRules.black[i],o=s.length;o--;)if(s[o][d]===r){mainRules.black[i].splice(o,1),a.remove(),0===mainRules.black[i].length&&(delete mainRules.black[i],c.parentNode.remove());break}chrome.storage.sync.set(mainRules,function(){iSClick=!1,t.innerHTML="删除成功!!",setTimeout(function(){t.innerHTML=""},1e3)})}});